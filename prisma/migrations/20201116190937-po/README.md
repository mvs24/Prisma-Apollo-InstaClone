# Migration `20201116190937-po`

This migration has been generated by mvs24 at 11/16/2020, 8:09:37 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "Post" (
"id" SERIAL,
    "userId" INTEGER NOT NULL,
    "content" TEXT NOT NULL,

    PRIMARY KEY ("id")
)

CREATE TABLE "PostLike" (
"id" SERIAL,
    "userId" INTEGER NOT NULL,
    "postId" INTEGER NOT NULL,

    PRIMARY KEY ("id")
)

CREATE TABLE "Comment" (
"id" SERIAL,
    "userId" INTEGER NOT NULL,
    "postId" INTEGER NOT NULL,
    "content" TEXT NOT NULL,

    PRIMARY KEY ("id")
)

CREATE TABLE "CommentLike" (
"id" SERIAL,
    "userId" INTEGER NOT NULL,
    "commentId" INTEGER NOT NULL,

    PRIMARY KEY ("id")
)

CREATE TABLE "Reply" (
"id" SERIAL,
    "userId" INTEGER NOT NULL,
    "content" TEXT NOT NULL,
    "commentId" INTEGER NOT NULL,

    PRIMARY KEY ("id")
)

ALTER TABLE "Post" ADD FOREIGN KEY("userId")REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "PostLike" ADD FOREIGN KEY("userId")REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "PostLike" ADD FOREIGN KEY("postId")REFERENCES "Post"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "Comment" ADD FOREIGN KEY("userId")REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "Comment" ADD FOREIGN KEY("postId")REFERENCES "Post"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "CommentLike" ADD FOREIGN KEY("userId")REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "CommentLike" ADD FOREIGN KEY("commentId")REFERENCES "Comment"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "Reply" ADD FOREIGN KEY("userId")REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "Reply" ADD FOREIGN KEY("commentId")REFERENCES "Comment"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201116173402-newonee..20201116190937-po
--- datamodel.dml
+++ datamodel.dml
@@ -3,18 +3,67 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model User {
   id Int @default(autoincrement()) @id
   name String
-  lastname String
+  lastname String 
   email String @unique
   password String 
   photo String?
   passwordResetToken String?
   passwordChangedAt DateTime?
   passwordResetExpires DateTime?
+  posts Post[]
+  comments Comment[]
+  replies Reply[]
+  postLikes PostLike[]
+  commentLikes CommentLike[]
 }
+
+model Post {
+  id Int @default(autoincrement()) @id
+  user User @relation(fields: [userId], references: [id])
+  userId Int
+  likes PostLike[]
+  comments Comment[]
+  content String
+}
+
+model PostLike {
+  id Int @default(autoincrement()) @id
+  user User @relation(fields: [userId], references: [id])
+  userId Int
+  post Post @relation(fields: [postId], references: [id])
+  postId Int
+}
+
+model Comment {
+  id Int @default(autoincrement()) @id
+  user User @relation(fields: [userId], references: [id])
+  userId Int
+  post Post @relation(fields: [postId], references: [id])
+  postId Int
+  replies Reply[]
+  content String
+}
+
+model CommentLike {
+  id Int @default(autoincrement()) @id
+  user User @relation(fields: [userId], references: [id])
+  userId Int
+  comment Comment @relation(fields: [commentId], references: [id])
+  commentId Int
+}
+
+model Reply {
+  id Int @default(autoincrement()) @id
+  user User @relation(fields: [userId], references: [id])
+  userId Int
+  content String
+  comment Comment @relation(fields: [commentId], references: [id])
+  commentId Int 
+}
```


